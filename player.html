<html>
<head>
  <title>Reproductor M3U8 & MPD Player</title>
  <style type="text/css">body{margin:0 auto;}</style>
   <style type="text/css">
* {
  box-sizing: border-box;
}

body {
  margin: 0;
  font-family: Arial;
  font-size: 17px;
}

		 #player{
  position: fixed;
  right: 0;
  bottom: 0;
  min-width: 100%; 
  min-height: 100%;
}

        </style>
</head>
<body>
  <script src="clappr.min.js"></script>
  <script src="level-selector.min.js"></script>
  <script src="clappr-pip.min.js"></script>
  <script src="dash-shaka-playback.js"></script>


<div id="player"></div>
<script>

function playM3u8(url, license, clearkeys) {
    var player = new Clappr.Player({
        source: url,
        parentId: '#player',
        preload: 'auto',
        autoPlay: 'true',
        width: '100%',
        height: '100%',
        fullscreenEnabled: 'true',
        hideMediaControl: 'false',
        plugins: [LevelSelector, ClapprPip.PipButton, ClapprPip.PipPlugin, DashShakaPlayback],
        shakaConfiguration: {
            drm: {
                servers: {
                    'com.widevine.alpha': license
                },
                clearKeys: JSON.parse(clearkeys)
            },
        },

    });

    document.title = url; //.split('/')[url.split('/').length - 1];
}
var url = window.location.href.split("#")[1];

ck1='{"'
ck2='":"'
ck3='"}'

try {
   ckt = url.split("?ck=")[1];
    ck=ck1+ckt.split("&")[0]+ck2+ckt.split("&")[1]+ck3;
} catch{
  ck = '{"":""}';
}
try {
  license =  url.split("?l=")[1];    
} catch {
  license = '';
}
playM3u8(url, license, ck);

</script>
</body>
</html>
